<Ui xmlns="http://www.blizzard.com/wow/ui/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ../../../BlizzardInterfaceCode/Interface/FrameXML/UI.xsd">

    <!-- Fenêtre principale -->
    <Frame name="TrinityAdminMainFrame" parent="UIParent" toplevel="true" enableMouse="true" hidden="true">
        <Size>
            <AbsDimension x="700" y="400"/>
        </Size>
        <Anchors>
            <Anchor point="CENTER"/>
        </Anchors>

        <!-- Fond noir semi-transparent -->
        <Layers>
            <Layer level="BACKGROUND">
                <Texture name="$parentBackground">
                    <Anchors>
                        <Anchor point="TOPLEFT"/>
                        <Anchor point="BOTTOMRIGHT"/>
                    </Anchors>
                    <Color r="0" g="0" b="0" a="0.7"/>
                </Texture>
            </Layer>
            <Layer level="ARTWORK">
                <FontString name="$parentTitle" inherits="GameFontNormalLarge" text="TrinityAdmin Main Menu">
                    <Size>
                        <AbsDimension x="400" y="20"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOP">
                            <Offset>
                                <AbsDimension x="0" y="-10"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
            </Layer>
        </Layers>

        <!-- Boutons Teleport, GM, Npc, Close -->
        <Frames>
            <Button name="$parentTeleportButton" inherits="UIPanelButtonTemplate" text="Teleport">
                <Size>
                    <AbsDimension x="80" y="30"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT">
                        <Offset>
                            <AbsDimension x="10" y="-70"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        TrinityAdmin_ShowTeleportPanel()
                    </OnClick>
                </Scripts>
            </Button>

            <Button name="$parentGMButton" inherits="UIPanelButtonTemplate" text="Modify Funcs">
                <Size>
                    <AbsDimension x="100" y="30"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentTeleportButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="10" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        TrinityAdmin_ShowGMPanel()
                    </OnClick>
                </Scripts>
            </Button>

            <Button name="$parentNPCButton" inherits="UIPanelButtonTemplate" text="Npc">
                <Size>
                    <AbsDimension x="80" y="30"/>
                </Size>
                <Anchors>
                    <Anchor point="LEFT" relativeTo="$parentGMButton" relativePoint="RIGHT">
                        <Offset>
                            <AbsDimension x="10" y="0"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        TrinityAdmin_ShowNPCPanel()
                    </OnClick>
                </Scripts>
            </Button>
             <!-- Nouveau bouton GM Functions -->
			<Button name="$parentGMFunctionsButton" inherits="UIPanelButtonTemplate" text="GM Funcs">
				<Size>
					<AbsDimension x="100" y="30"/>
				</Size>
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentNPCButton" relativePoint="RIGHT">
						<Offset>
							<AbsDimension x="10" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						TrinityAdmin_ShowGMFunctionsPanel()
					</OnClick>
				</Scripts>
			</Button>
			<!-- Bouton Account Ici, $parent prend la valeur "TrinityAdminMainFrame", donc le nom final du bouton sera : TrinityAdminMainFrameAccountButton-->
			<Button name="$parentAccountButton" inherits="UIPanelButtonTemplate" text="Accounts">
				<Size>
					<AbsDimension x="100" y="30"/>
				</Size>
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentGMFunctionsButton" relativePoint="RIGHT">
					    <Offset>
							<AbsDimension x="10" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						TrinityAdmin_ShowAccountPanel()
					</OnClick>
				</Scripts>
			</Button>
			<!-- Panneau de gestion des bdd -->
			<Button name="$parentDatabaseButton" inherits="UIPanelButtonTemplate" text="Database/Saves">
				<Size>
					<AbsDimension x="115" y="30"/>
				</Size>
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentAccountButton" relativePoint="RIGHT">
						<Offset>
							<AbsDimension x="10" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						TrinityAdmin_ShowDatabasePanel()
					</OnClick>
				</Scripts>
			</Button>
			<!-- Bouton Server Admin -->
			<Button name="$parentServerAdminButton" inherits="UIPanelButtonTemplate" text="Server Admin">
				<Size>
					<AbsDimension x="105" y="30"/>
				</Size>
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentTeleportButton" relativePoint="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="0" y="-45"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						TrinityAdmin_ShowServerAdminPanel()
					</OnClick>
				</Scripts>
			</Button>
			<!-- Bouton GameObjects -->
			<Button name="$parentGameObjectsButton" inherits="UIPanelButtonTemplate" text="GameObjects">
				<Size>
					<AbsDimension x="105" y="30"/>
				</Size>
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentServerAdminButton" relativePoint="RIGHT">
						<Offset>
							<AbsDimension x="10" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						TrinityAdmin_ShowGameObjectsPanel()
					</OnClick>
				</Scripts>
			</Button>
			<!-- Bouton AddItem -->
			<Button name="$parentAddItemButton" inherits="UIPanelButtonTemplate" text="Add Item">
				<Size>
					<AbsDimension x="105" y="30"/>
				</Size>
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentGameObjectsButton" relativePoint="RIGHT">
						<Offset>
							<AbsDimension x="10" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						TrinityAdmin_ShowAddItemPanel()
					</OnClick>
				</Scripts>
			</Button>
			<!-- Bouton AdvancedItems -->
			<Button name="$parentAdvancedItemsButton" inherits="UIPanelButtonTemplate" text="Advanced Items">
				<Size>
					<AbsDimension x="120" y="30"/>
				</Size>
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentAddItemButton" relativePoint="RIGHT">
						<Offset>
							<AbsDimension x="10" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						TrinityAdmin_ShowAdvancedItemsPanel()
					</OnClick>
				</Scripts>
			</Button>
			<!-- Bouton Module Characters -->
			<Button name="$parentModuleCharacterButton" inherits="UIPanelButtonTemplate" text="Characters Module">
			<Size>
				<AbsDimension x="135" y="30"/>
			</Size>
			<Anchors>
				<Anchor point="LEFT" relativeTo="$parentAdvancedItemsButton" relativePoint="RIGHT">
				<Offset>
					<AbsDimension x="10" y="0"/>
				</Offset>
				</Anchor>
			</Anchors>
			<Scripts>
				<OnClick>
				TrinityAdmin_ShowModuleCharacterPanel()
				</OnClick>
			</Scripts>
			</Button>
			<!-- Bouton Module Waypoints -->
			<Button name="$parentWaypointsButton" inherits="UIPanelButtonTemplate" text="Waypoints Module">
			<Size>
				<AbsDimension x="135" y="30"/>
			</Size>
			<Anchors>
				<Anchor point="LEFT" relativeTo="$parentServerAdminButton" relativePoint="BOTTOMLEFT">
				<Offset>
					<AbsDimension x="0" y="-45"/>
				</Offset>
				</Anchor>
			</Anchors>
			<Scripts>
				<OnClick>
				TrinityAdmin_ShowWaypointsPanel()
				</OnClick>
			</Scripts>
			</Button>
			<!-- Bouton Module AhBot -->
			<Button name="$parentAhBotButton" inherits="UIPanelButtonTemplate" text="AH Bot Module">
			<Size>
				<AbsDimension x="135" y="30"/>
			</Size>
			<Anchors>
				<Anchor point="LEFT" relativeTo="$parentWaypointsButton" relativePoint="RIGHT">
				<Offset>
					<AbsDimension x="10" y="0"/>
				</Offset>
				</Anchor>
			</Anchors>
			<Scripts>
				<OnClick>
				TrinityAdmin_ShowAhBotPanel()
				</OnClick>
			</Scripts>
			</Button>
			<!-- Bouton Module Guild -->
			<Button name="$parentGuildButton" inherits="UIPanelButtonTemplate" text="Guild's Module">
			<Size>
				<AbsDimension x="135" y="30"/>
			</Size>
			<Anchors>
				<Anchor point="LEFT" relativeTo="$parentAhBotButton" relativePoint="RIGHT">
				<Offset>
					<AbsDimension x="10" y="0"/>
				</Offset>
				</Anchor>
			</Anchors>
			<Scripts>
				<OnClick>
				TrinityAdmin_ShowGuildPanel()
				</OnClick>
			</Scripts>
			</Button>	
			<!-- Bouton Module LearnDamage -->
			<Button name="$parentLearnDamageButton" inherits="UIPanelButtonTemplate" text="Learn And Damages">
			<Size>
				<AbsDimension x="135" y="30"/>
			</Size>
			<Anchors>
				<Anchor point="LEFT" relativeTo="$parentGuildButton" relativePoint="RIGHT">
				<Offset>
					<AbsDimension x="10" y="0"/>
				</Offset>
				</Anchor>
			</Anchors>
			<Scripts>
				<OnClick>
				TrinityAdmin_ShowLearnDamagePanel()
				</OnClick>
			</Scripts>
			</Button>	
			<!-- Bouton Module AdvancedGob -->
			<Button name="$parentAdvancedGobButton" inherits="UIPanelButtonTemplate" text="Advanced GameObjects">
			<Size>
				<AbsDimension x="170" y="30"/>
			</Size>
			<Anchors>
				<Anchor point="LEFT" relativeTo="$parentWaypointsButton" relativePoint="BOTTOMLEFT">
				<Offset>
					<AbsDimension x="0" y="-45"/>
				</Offset>
				</Anchor>
			</Anchors>
			<Scripts>
				<OnClick>
				TrinityAdmin_ShowAdvancedGobPanel()
				</OnClick>
			</Scripts>
			</Button>	
			<!-- Bouton Module AdvancedNpc -->
			<Button name="$parentAdvancedNpcButton" inherits="UIPanelButtonTemplate" text="Advanced NPC Add">
			<Size>
				<AbsDimension x="170" y="30"/>
			</Size>
			<Anchors>
				<Anchor point="LEFT" relativeTo="$parentAdvancedGobButton" relativePoint="RIGHT">
				<Offset>
					<AbsDimension x="10" y="0"/>
				</Offset>
				</Anchor>
			</Anchors>
			<Scripts>
				<OnClick>
				TrinityAdmin_ShowAdvancedNpcPanel()
				</OnClick>
			</Scripts>
			</Button>										
            <!-- Bouton Fermer -->
            <Button name="$parentCloseButton" inherits="UIPanelCloseButton">
                <Anchors>
                    <Anchor point="TOPRIGHT">
                        <Offset>
                            <AbsDimension x="-5" y="-5"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Scripts>
                    <OnClick>
                        TrinityAdminMainFrame:Hide()
                    </OnClick>
                </Scripts>
            </Button>
        </Frames>
    </Frame>

    <!-- Nouveau template pour nos dropdowns : TrinityAdminDropdownTemplate -->
    <Frame name="TrinityAdminDropdownTemplate" virtual="true" inherits="UIDropDownMenuTemplate">
        <Scripts>
            <OnLoad>
                -- Largeur
                UIDropDownMenu_SetWidth(self, 110)
                UIDropDownMenu_SetDisplayMode(self, "MENU_WITH_BORDERS")
                UIDropDownMenu_JustifyText(self, "LEFT")
            
                -- On récupère le bouton en s'assurant que le nom n'est pas nil
                local name = self:GetName() or ""
                local btn = _G[name.."Button"]
                if btn then
                    local fs = btn:GetFontString()
                    if fs then
                        fs:SetFontObject("GameFontHighlightSmall")
                        fs:SetTextColor(1,1,1,1)
                    end
                end
            
                -- (Optionnel) Masquer Left, Middle, Right
                local left  = _G[name.."Left"]
                local mid   = _G[name.."Middle"]
                local right = _G[name.."Right"]
                if left  then left:Hide()  end
                if mid   then mid:Hide()   end
                if right then right:Hide() end
            </OnLoad>
    </Scripts>
	</Frame>
</Ui>
